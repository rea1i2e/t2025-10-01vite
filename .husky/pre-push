#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 ビルド前のHTMLバリデーションを実行中..."
npm run validate:html:src

if [ $? -ne 0 ]; then
  echo "❌ HTMLバリデーションエラーが検出されました。プッシュを中止します。"
  exit 1
fi

echo "🏗️ ビルドを実行中..."
npm run build

echo "🔍 ビルド後のHTMLバリデーションを実行中..."
npm run validate:html:dist

if [ $? -ne 0 ]; then
  echo "❌ ビルド後のHTMLバリデーションエラーが検出されました。プッシュを中止します。"
  exit 1
fi

echo "✅ すべてのバリデーション完了"
